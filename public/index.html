<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vasanthi Foods - Authentic Indian Cuisine</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #628141;
            --accent: #F1C40F;
            --background: #F9F9F9;
            --secondary: #40513B;
            --white: #FFFFFF;
            --text-dark: #2C3E50;
            --text-light: #7F8C8D;
            --border: #E0E0E0;
            --success: #27AE60;
            --error: #E74C3C;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--background);
            color: var(--text-dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: var(--white);
            box-shadow: 0 2px 10px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
        }

        .logo h1 {
            color: var(--secondary);
            font-size: 24px;
            font-weight: 700;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .cart-badge {
            position: relative;
        }

        .badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--accent);
            color: var(--secondary);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
        }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .btn-accent {
            background: var(--accent);
            color: var(--secondary);
        }

        .btn-accent:hover {
            background: #F39C12;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        .btn-icon {
            padding: 10px;
            border-radius: 50%;
            background: transparent;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-icon:hover {
            background: var(--background);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 60px 20px;
            text-align: center;
        }

        .hero h2 {
            font-size: 48px;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .hero p {
            font-size: 20px;
            opacity: 0.95;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Menu */
        .menu-section {
            padding: 40px 20px;
        }

        .section-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .section-header h2 {
            color: var(--secondary);
            font-size: 36px;
            margin-bottom: 10px;
        }

        .section-header p {
            color: var(--text-light);
            font-size: 16px;
        }

        .category-tabs {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .category-tab {
            padding: 10px 24px;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .category-tab.active {
            background: var(--primary);
            color: white;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }

        .menu-item {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px var(--shadow);
            transition: transform 0.3s ease;
        }

        .menu-item:hover {
            transform: translateY(-5px);
        }

        .menu-item-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            color: white;
        }

        .menu-item-content {
            padding: 20px;
        }

        .menu-item-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 10px;
        }

        .menu-item-name {
            font-size: 18px;
            font-weight: 700;
            color: var(--secondary);
        }

        .menu-item-price {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
        }

        .menu-item-description {
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 15px;
        }

        .menu-item-category {
            display: inline-block;
            background: var(--background);
            color: var(--primary);
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal {
            background: white;
            border-radius: 16px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: white;
            z-index: 1;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--secondary);
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 20px;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary);
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .form-error {
            color: var(--error);
            font-size: 12px;
            margin-top: 5px;
        }

        /* Cart */
        .cart-item {
            display: flex;
            gap: 15px;
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 700;
            color: var(--secondary);
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: var(--primary);
            font-weight: 600;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: var(--primary);
            color: white;
        }

        .quantity-display {
            font-weight: 700;
            min-width: 30px;
            text-align: center;
        }

        .cart-summary {
            border-top: 2px solid var(--border);
            padding-top: 20px;
            margin-top: 20px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .summary-row.total {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
            border-top: 2px solid var(--border);
            padding-top: 15px;
            margin-top: 15px;
        }

        .coupon-section {
            margin: 20px 0;
            padding: 15px;
            background: var(--background);
            border-radius: 8px;
        }

        .coupon-input-group {
            display: flex;
            gap: 10px;
        }

        .coupon-applied {
            color: var(--success);
            font-size: 14px;
            margin-top: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Orders */
        .order-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px var(--shadow);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border);
        }

        .order-id {
            font-weight: 700;
            color: var(--secondary);
            font-size: 18px;
        }

        .order-status {
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-pending { background: #FFF3CD; color: #856404; }
        .status-confirmed { background: #D1ECF1; color: #0C5460; }
        .status-preparing { background: #F8D7DA; color: #721C24; }
        .status-out_for_delivery { background: #D4EDDA; color: #155724; }
        .status-delivered { background: var(--success); color: white; }
        .status-cancelled { background: var(--error); color: white; }

        .order-timeline {
            margin: 20px 0;
        }

        .timeline-item {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            position: relative;
            padding-left: 30px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 25px;
            width: 2px;
            height: 100%;
            background: var(--border);
        }

        .timeline-item:last-child::before {
            display: none;
        }

        .timeline-dot {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary);
            position: absolute;
            left: 0;
            top: 5px;
        }

        .timeline-dot.inactive {
            background: var(--border);
        }

        /* Admin Panel */
        .admin-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border);
            padding-bottom: 10px;
            overflow-x: auto;
        }

        .admin-nav-item {
            padding: 10px 20px;
            background: transparent;
            border: none;
            color: var(--text-light);
            font-weight: 600;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .admin-nav-item.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 10px var(--shadow);
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .stat-label {
            color: var(--text-light);
            font-size: 14px;
        }

        .data-table {
            width: 100%;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px var(--shadow);
        }

        .data-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background: var(--secondary);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .data-table td {
            padding: 15px;
            border-bottom: 1px solid var(--border);
        }

        .data-table tr:hover {
            background: var(--background);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .empty-state-text {
            color: var(--text-light);
            font-size: 18px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h2 {
                font-size: 32px;
            }

            .hero p {
                font-size: 16px;
            }

            .menu-grid {
                grid-template-columns: 1fr;
            }

            .header-content {
                flex-wrap: wrap;
            }

            .nav-buttons {
                width: 100%;
                justify-content: space-between;
                margin-top: 10px;
            }

            .data-table {
                overflow-x: auto;
            }

            .admin-nav {
                flex-wrap: nowrap;
                overflow-x: auto;
            }
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-light);
        }

        .spinner {
            border: 3px solid var(--border);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .payment-options {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .payment-option {
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .payment-option:hover {
            border-color: var(--primary);
            background: var(--background);
        }

        .payment-option.selected {
            border-color: var(--primary);
            background: rgba(98, 129, 65, 0.1);
        }

        .payment-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .payment-option.selected .payment-icon {
            background: var(--primary);
        }

        .payment-option.selected .payment-icon::after {
            content: '‚úì';
            color: white;
            font-weight: bold;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const API_BASE = window.location.origin;

        // API Helper
        const api = {
            async request(endpoint, options = {}) {
                const token = localStorage.getItem('token');
                const headers = {
                    'Content-Type': 'application/json',
                    ...options.headers,
                };
                if (token) {
                    headers['Authorization'] = `Bearer ${token}`;
                }

                const response = await fetch(`${API_BASE}${endpoint}`, {
                    ...options,
                    headers,
                });

                const data = await response.json();
                if (!response.ok) {
                    throw new Error(data.error || 'Something went wrong');
                }
                return data;
            },

            async get(endpoint) {
                return this.request(endpoint);
            },

            async post(endpoint, body) {
                return this.request(endpoint, {
                    method: 'POST',
                    body: JSON.stringify(body),
                });
            },

            async put(endpoint, body) {
                return this.request(endpoint, {
                    method: 'PUT',
                    body: JSON.stringify(body),
                });
            },

            async delete(endpoint) {
                return this.request(endpoint, {
                    method: 'DELETE',
                });
            },
        };

        // Main App Component
        function App() {
            const [user, setUser] = useState(null);
            const [loading, setLoading] = useState(true);
            const [view, setView] = useState('home');
            const [cart, setCart] = useState([]);

            useEffect(() => {
                checkAuth();
                loadCart();
            }, []);

            const checkAuth = async () => {
                const token = localStorage.getItem('token');
                if (token) {
                    try {
                        const userData = await api.get('/api/auth/me');
                        setUser(userData);
                    } catch (error) {
                        localStorage.removeItem('token');
                    }
                }
                setLoading(false);
            };

            const loadCart = () => {
                const savedCart = localStorage.getItem('cart');
                if (savedCart) {
                    setCart(JSON.parse(savedCart));
                }
            };

            const saveCart = (newCart) => {
                setCart(newCart);
                localStorage.setItem('cart', JSON.stringify(newCart));
            };

            const addToCart = (item) => {
                const existingItem = cart.find(i => i.id === item._id);
                if (existingItem) {
                    const newCart = cart.map(i =>
                        i.id === item._id ? { ...i, quantity: i.quantity + 1 } : i
                    );
                    saveCart(newCart);
                } else {
                    saveCart([...cart, {
                        id: item._id,
                        name: item.name,
                        price: item.price,
                        quantity: 1
                    }]);
                }
            };

            const updateQuantity = (itemId, delta) => {
                const newCart = cart.map(item =>
                    item.id === itemId
                        ? { ...item, quantity: Math.max(0, item.quantity + delta) }
                        : item
                ).filter(item => item.quantity > 0);
                saveCart(newCart);
            };

            const clearCart = () => {
                saveCart([]);
            };

            const logout = () => {
                localStorage.removeItem('token');
                setUser(null);
                setView('home');
            };

            if (loading) {
                return (
                    <div className="loading">
                        <div className="spinner"></div>
                        <div>Loading Vasanthi Foods...</div>
                    </div>
                );
            }

            return (
                <>
                    <Header
                        user={user}
                        cart={cart}
                        onViewChange={setView}
                        onLogout={logout}
                    />
                    
                    {view === 'home' && !user && <Hero onViewChange={setView} />}
                    
                    {view === 'home' && user && user.role === 'customer' && (
                        <Menu onAddToCart={addToCart} />
                    )}
                    
                    {view === 'home' && user && user.role === 'admin' && (
                        <AdminDashboard />
                    )}
                    
                    {view === 'login' && (
                        <AuthForm
                            mode="login"
                            onSuccess={(userData) => {
                                setUser(userData);
                                setView('home');
                            }}
                            onSwitch={() => setView('register')}
                        />
                    )}
                    
                    {view === 'register' && (
                        <AuthForm
                            mode="register"
                            onSuccess={(userData) => {
                                setUser(userData);
                                setView('home');
                            }}
                            onSwitch={() => setView('login')}
                        />
                    )}
                    
                    {view === 'cart' && (
                        <Cart
                            cart={cart}
                            onUpdateQuantity={updateQuantity}
                            onCheckout={() => setView('checkout')}
                            onClose={() => setView('home')}
                        />
                    )}
                    
                    {view === 'checkout' && (
                        <Checkout
                            cart={cart}
                            user={user}
                            onSuccess={() => {
                                clearCart();
                                setView('orders');
                            }}
                            onCancel={() => setView('cart')}
                        />
                    )}
                    
                    {view === 'orders' && (
                        <MyOrders userId={user?._id} />
                    )}
                </>
            );
        }

        // Header Component
        function Header({ user, cart, onViewChange, onLogout }) {
            const cartCount = cart.reduce((sum, item) => sum + item.quantity, 0);

            return (
                <header>
                    <div className="header-content">
                        <div className="logo" onClick={() => onViewChange('home')} style={{ cursor: 'pointer' }}>
                            <div className="logo-icon">VF</div>
                            <h1>Vasanthi Foods</h1>
                        </div>
                        
                        <div className="nav-buttons">
                            {user && user.role === 'customer' && (
                                <>
                                    <button className="btn btn-secondary btn-sm" onClick={() => onViewChange('orders')}>
                                        My Orders
                                    </button>
                                    <div className="cart-badge">
                                        <button className="btn btn-primary btn-sm" onClick={() => onViewChange('cart')}>
                                            üõí Cart
                                        </button>
                                        {cartCount > 0 && <span className="badge">{cartCount}</span>}
                                    </div>
                                </>
                            )}
                            
                            {user ? (
                                <button className="btn btn-secondary btn-sm" onClick={onLogout}>
                                    Logout ({user.name})
                                </button>
                            ) : (
                                <>
                                    <button className="btn btn-secondary btn-sm" onClick={() => onViewChange('login')}>
                                        Login
                                    </button>
                                    <button className="btn btn-primary btn-sm" onClick={() => onViewChange('register')}>
                                        Sign Up
                                    </button>
                                </>
                            )}
                        </div>
                    </div>
                </header>
            );
        }

        // Hero Component
        function Hero({ onViewChange }) {
            return (
                <div className="hero">
                    <div className="container">
                        <h2>Welcome to Vasanthi Foods</h2>
                        <p>Authentic Indian Cuisine Delivered Fresh to Your Door</p>
                        <button className="btn btn-accent" style={{ marginTop: '30px' }} onClick={() => onViewChange('register')}>
                            Order Now üçõ
                        </button>
                    </div>
                </div>
            );
        }

        // Auth Form Component
        function AuthForm({ mode, onSuccess, onSwitch }) {
            const [formData, setFormData] = useState({
                email: mode === 'login' && window.location.hostname === 'localhost' ? 'admin@vasanthifoods.com' : '',
                password: mode === 'login' && window.location.hostname === 'localhost' ? 'admin123' : '',
                name: '',
                phone: '',
                address: ''
            });
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);

            const handleSubmit = async (e) => {
                e.preventDefault();
                setError('');
                setLoading(true);

                try {
                    const endpoint = mode === 'login' ? '/api/auth/login' : '/api/auth/register';
                    const data = await api.post(endpoint, formData);
                    localStorage.setItem('token', data.token);
                    onSuccess(data.user);
                } catch (err) {
                    setError(err.message);
                } finally {
                    setLoading(false);
                }
            };

            return (
                <div className="container" style={{ maxWidth: '500px', marginTop: '50px' }}>
                    <div style={{ background: 'white', padding: '40px', borderRadius: '16px', boxShadow: '0 4px 20px rgba(0,0,0,0.1)' }}>
                        <h2 style={{ textAlign: 'center', marginBottom: '30px', color: 'var(--secondary)' }}>
                            {mode === 'login' ? 'Welcome Back' : 'Create Account'}
                        </h2>
                        
                        <form onSubmit={handleSubmit}>
                            {mode === 'register' && (
                                <div className="form-group">
                                    <label className="form-label">Full Name</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={formData.name}
                                        onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                                        required
                                    />
                                </div>
                            )}
                            
                            <div className="form-group">
                                <label className="form-label">Email</label>
                                <input
                                    type="email"
                                    className="form-input"
                                    value={formData.email}
                                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                                    required
                                />
                            </div>
                            
                            <div className="form-group">
                                <label className="form-label">Password</label>
                                <input
                                    type="password"
                                    className="form-input"
                                    value={formData.password}
                                    onChange={(e) => setFormData({ ...formData, password: e.target.value })}
                                    required
                                />
                            </div>
                            
                            {mode === 'register' && (
                                <>
                                    <div className="form-group">
                                        <label className="form-label">Phone</label>
                                        <input
                                            type="tel"
                                            className="form-input"
                                            value={formData.phone}
                                            onChange={(e) => setFormData({ ...formData, phone: e.target.value })}
                                            required
                                        />
                                    </div>
                                    
                                    <div className="form-group">
                                        <label className="form-label">Delivery Address</label>
                                        <textarea
                                            className="form-input"
                                            rows="3"
                                            value={formData.address}
                                            onChange={(e) => setFormData({ ...formData, address: e.target.value })}
                                            required
                                        />
                                    </div>
                                </>
                            )}
                            
                            {error && <div className="form-error" style={{ marginBottom: '15px' }}>{error}</div>}
                            
                            <button type="submit" className="btn btn-primary" style={{ width: '100%' }} disabled={loading}>
                                {loading ? 'Please wait...' : mode === 'login' ? 'Login' : 'Sign Up'}
                            </button>
                        </form>
                        
                        <div style={{ textAlign: 'center', marginTop: '20px' }}>
                            {mode === 'login' ? (
                                <span>Don't have an account? <a href="#" onClick={onSwitch} style={{ color: 'var(--primary)', fontWeight: 'bold' }}>Sign Up</a></span>
                            ) : (
                                <span>Already have an account? <a href="#" onClick={onSwitch} style={{ color: 'var(--primary)', fontWeight: 'bold' }}>Login</a></span>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        // Menu Component
        function Menu({ onAddToCart }) {
            const [menuItems, setMenuItems] = useState([]);
            const [categories, setCategories] = useState([]);
            const [selectedCategory, setSelectedCategory] = useState('all');
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                loadMenu();
            }, []);

            const loadMenu = async () => {
                try {
                    const items = await api.get('/api/menu');
                    setMenuItems(items);
                    const cats = ['all', ...new Set(items.map(item => item.category))];
                    setCategories(cats);
                } catch (error) {
                    console.error('Error loading menu:', error);
                } finally {
                    setLoading(false);
                }
            };

            const filteredItems = selectedCategory === 'all'
                ? menuItems
                : menuItems.filter(item => item.category === selectedCategory);

            const foodEmojis = {
                'Appetizers': 'ü•ò',
                'Main Course': 'üçõ',
                'Breads': 'ü´ì',
                'Rice': 'üçö',
                'Desserts': 'üçÆ',
                'Beverages': 'ü•§',
                'Biryani': 'üç≤',
                'Curry': 'üçõ',
                'Snacks': 'ü•ü',
                'Sweets': 'üç¨'
            };

            if (loading) {
                return (
                    <div className="loading">
                        <div className="spinner"></div>
                        <div>Loading delicious menu...</div>
                    </div>
                );
            }

            return (
                <div className="menu-section">
                    <div className="container">
                        <div className="section-header">
                            <h2>Our Menu</h2>
                            <p>Fresh, authentic Indian cuisine prepared with love</p>
                        </div>
                        
                        <div className="category-tabs">
                            {categories.map(cat => (
                                <button
                                    key={cat}
                                    className={`category-tab ${selectedCategory === cat ? 'active' : ''}`}
                                    onClick={() => setSelectedCategory(cat)}
                                >
                                    {cat === 'all' ? 'All Items' : cat}
                                </button>
                            ))}
                        </div>
                        
                        {filteredItems.length === 0 ? (
                            <div className="empty-state">
                                <div className="empty-state-icon">üçΩÔ∏è</div>
                                <div className="empty-state-text">No items available in this category</div>
                            </div>
                        ) : (
                            <div className="menu-grid">
                                {filteredItems.map(item => (
                                    <div key={item._id} className="menu-item">
                                        <div className="menu-item-image">
                                            {foodEmojis[item.category] || 'üçΩÔ∏è'}
                                        </div>
                                        <div className="menu-item-content">
                                            <span className="menu-item-category">{item.category}</span>
                                            <div className="menu-item-header">
                                                <div className="menu-item-name">{item.name}</div>
                                                <div className="menu-item-price">‚Çπ{item.price}</div>
                                            </div>
                                            <div className="menu-item-description">{item.description}</div>
                                            <button
                                                className="btn btn-primary"
                                                style={{ width: '100%' }}
                                                onClick={() => onAddToCart(item)}
                                            >
                                                Add to Cart
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Cart Component
        function Cart({ cart, onUpdateQuantity, onCheckout, onClose }) {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

            return (
                <div className="container" style={{ marginTop: '40px', maxWidth: '800px' }}>
                    <div style={{ background: 'white', padding: '30px', borderRadius: '16px', boxShadow: '0 4px 20px rgba(0,0,0,0.1)' }}>
                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '30px' }}>
                            <h2 style={{ color: 'var(--secondary)' }}>Shopping Cart</h2>
                            <button className="btn btn-secondary btn-sm" onClick={onClose}>Continue Shopping</button>
                        </div>
                        
                        {cart.length === 0 ? (
                            <div className="empty-state">
                                <div className="empty-state-icon">üõí</div>
                                <div className="empty-state-text">Your cart is empty</div>
                                <button className="btn btn-primary" onClick={onClose} style={{ marginTop: '20px' }}>
                                    Browse Menu
                                </button>
                            </div>
                        ) : (
                            <>
                                {cart.map(item => (
                                    <div key={item.id} className="cart-item">
                                        <div className="cart-item-info">
                                            <div className="cart-item-name">{item.name}</div>
                                            <div className="cart-item-price">‚Çπ{item.price} each</div>
                                            <div className="quantity-controls">
                                                <button
                                                    className="quantity-btn"
                                                    onClick={() => onUpdateQuantity(item.id, -1)}
                                                >
                                                    ‚àí
                                                </button>
                                                <span className="quantity-display">{item.quantity}</span>
                                                <button
                                                    className="quantity-btn"
                                                    onClick={() => onUpdateQuantity(item.id, 1)}
                                                >
                                                    +
                                                </button>
                                            </div>
                                        </div>
                                        <div style={{ fontWeight: 'bold', color: 'var(--primary)', fontSize: '18px' }}>
                                            ‚Çπ{item.price * item.quantity}
                                        </div>
                                    </div>
                                ))}
                                
                                <div className="cart-summary">
                                    <div className="summary-row">
                                        <span>Subtotal</span>
                                        <span>‚Çπ{subtotal}</span>
                                    </div>
                                    <div className="summary-row total">
                                        <span>Total</span>
                                        <span>‚Çπ{subtotal}</span>
                                    </div>
                                </div>
                                
                                <button
                                    className="btn btn-primary"
                                    style={{ width: '100%', marginTop: '20px' }}
                                    onClick={onCheckout}
                                >
                                    Proceed to Checkout
                                </button>
                            </>
                        )}
                    </div>
                </div>
            );
        }

        // Checkout Component
        function Checkout({ cart, user, onSuccess, onCancel }) {
            const [formData, setFormData] = useState({
                deliveryAddress: user?.address || '',
                phone: user?.phone || '',
                paymentMethod: 'razorpay'
            });
            const [couponCode, setCouponCode] = useState('');
            const [appliedCoupon, setAppliedCoupon] = useState(null);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const discount = appliedCoupon?.discount || 0;
            const total = subtotal - discount;

            const validateCoupon = async () => {
                if (!couponCode.trim()) return;
                
                try {
                    const result = await api.post('/api/coupons/validate', {
                        code: couponCode,
                        orderTotal: subtotal
                    });
                    setAppliedCoupon(result);
                    setError('');
                } catch (err) {
                    setError(err.message);
                    setAppliedCoupon(null);
                }
            };

            const handleCheckout = async () => {
                setLoading(true);
                setError('');

                try {
                    const orderData = {
                        items: cart.map(item => ({
                            menuItemId: item.id,
                            name: item.name,
                            price: item.price,
                            quantity: item.quantity
                        })),
                        deliveryAddress: formData.deliveryAddress,
                        phone: formData.phone,
                        paymentMethod: formData.paymentMethod,
                        couponCode: appliedCoupon?.code
                    };

                    const order = await api.post('/api/orders', orderData);

                    // Handle different payment methods
                    if (formData.paymentMethod === 'razorpay') {
                        await handleRazorpayPayment(order);
                    } else if (formData.paymentMethod === 'cod') {
                        onSuccess();
                    }
                } catch (err) {
                    setError(err.message);
                } finally {
                    setLoading(false);
                }
            };

            const handleRazorpayPayment = (order) => {
                const options = {
                    key: 'rzp_test_DEMO_KEY', // Replace with actual Razorpay key
                    amount: order.total * 100,
                    currency: 'INR',
                    name: 'Vasanthi Foods',
                    description: `Order ${order.orderId}`,
                    order_id: order.orderId,
                    handler: async function (response) {
                        try {
                            await api.post(`/api/orders/${order._id}/payment`, {
                                paymentId: response.razorpay_payment_id,
                                paymentStatus: 'completed'
                            });
                            onSuccess();
                        } catch (err) {
                            setError('Payment verification failed');
                        }
                    },
                    prefill: {
                        name: user.name,
                        email: user.email,
                        contact: formData.phone
                    },
                    theme: {
                        color: '#628141'
                    }
                };

                const rzp = new Razorpay(options);
                rzp.open();
            };

            return (
                <div className="container" style={{ marginTop: '40px', maxWidth: '800px' }}>
                    <div style={{ background: 'white', padding: '30px', borderRadius: '16px', boxShadow: '0 4px 20px rgba(0,0,0,0.1)' }}>
                        <h2 style={{ color: 'var(--secondary)', marginBottom: '30px' }}>Checkout</h2>
                        
                        <div className="form-group">
                            <label className="form-label">Delivery Address</label>
                            <textarea
                                className="form-input"
                                rows="3"
                                value={formData.deliveryAddress}
                                onChange={(e) => setFormData({ ...formData, deliveryAddress: e.target.value })}
                                required
                            />
                        </div>
                        
                        <div className="form-group">
                            <label className="form-label">Phone Number</label>
                            <input
                                type="tel"
                                className="form-input"
                                value={formData.phone}
                                onChange={(e) => setFormData({ ...formData, phone: e.target.value })}
                                required
                            />
                        </div>
                        
                        <div className="coupon-section">
                            <label className="form-label">Have a Coupon Code?</label>
                            <div className="coupon-input-group">
                                <input
                                    type="text"
                                    className="form-input"
                                    placeholder="Enter coupon code"
                                    value={couponCode}
                                    onChange={(e) => setCouponCode(e.target.value.toUpperCase())}
                                />
                                <button className="btn btn-primary" onClick={validateCoupon}>
                                    Apply
                                </button>
                            </div>
                            {appliedCoupon && (
                                <div className="coupon-applied">
                                    ‚úì Coupon applied! You saved ‚Çπ{appliedCoupon.discount}
                                </div>
                            )}
                        </div>
                        
                        <div className="form-group">
                            <label className="form-label">Payment Method</label>
                            <div className="payment-options">
                                <div
                                    className={`payment-option ${formData.paymentMethod === 'razorpay' ? 'selected' : ''}`}
                                    onClick={() => setFormData({ ...formData, paymentMethod: 'razorpay' })}
                                >
                                    <div className="payment-icon"></div>
                                    <div>
                                        <div style={{ fontWeight: 'bold' }}>Razorpay</div>
                                        <div style={{ fontSize: '12px', color: 'var(--text-light)' }}>UPI, Cards, Wallets</div>
                                    </div>
                                </div>
                                <div
                                    className={`payment-option ${formData.paymentMethod === 'cod' ? 'selected' : ''}`}
                                    onClick={() => setFormData({ ...formData, paymentMethod: 'cod' })}
                                >
                                    <div className="payment-icon"></div>
                                    <div>
                                        <div style={{ fontWeight: 'bold' }}>Cash on Delivery</div>
                                        <div style={{ fontSize: '12px', color: 'var(--text-light)' }}>Pay when you receive</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div className="cart-summary">
                            <div className="summary-row">
                                <span>Subtotal</span>
                                <span>‚Çπ{subtotal}</span>
                            </div>
                            {discount > 0 && (
                                <div className="summary-row" style={{ color: 'var(--success)' }}>
                                    <span>Discount</span>
                                    <span>-‚Çπ{discount}</span>
                                </div>
                            )}
                            <div className="summary-row total">
                                <span>Total</span>
                                <span>‚Çπ{total}</span>
                            </div>
                        </div>
                        
                        {error && <div className="form-error" style={{ marginTop: '15px' }}>{error}</div>}
                        
                        <div style={{ display: 'flex', gap: '10px', marginTop: '30px' }}>
                            <button className="btn btn-secondary" onClick={onCancel} style={{ flex: 1 }}>
                                Back to Cart
                            </button>
                            <button
                                className="btn btn-primary"
                                onClick={handleCheckout}
                                disabled={loading}
                                style={{ flex: 1 }}
                            >
                                {loading ? 'Processing...' : `Place Order (‚Çπ${total})`}
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        // My Orders Component
        function MyOrders({ userId }) {
            const [orders, setOrders] = useState([]);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                loadOrders();
            }, []);

            const loadOrders = async () => {
                try {
                    const data = await api.get('/api/orders/my-orders');
                    setOrders(data);
                } catch (error) {
                    console.error('Error loading orders:', error);
                } finally {
                    setLoading(false);
                }
            };

            const getStatusLabel = (status) => {
                const labels = {
                    pending: 'Pending',
                    confirmed: 'Confirmed',
                    preparing: 'Preparing',
                    out_for_delivery: 'Out for Delivery',
                    delivered: 'Delivered',
                    cancelled: 'Cancelled'
                };
                return labels[status] || status;
            };

            if (loading) {
                return (
                    <div className="loading">
                        <div className="spinner"></div>
                        <div>Loading your orders...</div>
                    </div>
                );
            }

            return (
                <div className="container" style={{ marginTop: '40px' }}>
                    <h2 style={{ color: 'var(--secondary)', marginBottom: '30px' }}>My Orders</h2>
                    
                    {orders.length === 0 ? (
                        <div className="empty-state">
                            <div className="empty-state-icon">üì¶</div>
                            <div className="empty-state-text">No orders yet</div>
                        </div>
                    ) : (
                        orders.map(order => (
                            <div key={order._id} className="order-card">
                                <div className="order-header">
                                    <div>
                                        <div className="order-id">Order #{order.orderId}</div>
                                        <div style={{ color: 'var(--text-light)', fontSize: '14px' }}>
                                            {new Date(order.createdAt).toLocaleString()}
                                        </div>
                                    </div>
                                    <div className={`order-status status-${order.status}`}>
                                        {getStatusLabel(order.status)}
                                    </div>
                                </div>
                                
                                <div style={{ marginBottom: '15px' }}>
                                    {order.items.map((item, idx) => (
                                        <div key={idx} style={{ padding: '8px 0', borderBottom: '1px solid var(--border)' }}>
                                            <span style={{ fontWeight: '600' }}>{item.name}</span>
                                            <span style={{ color: 'var(--text-light)', marginLeft: '10px' }}>
                                                x{item.quantity}
                                            </span>
                                            <span style={{ float: 'right', color: 'var(--primary)', fontWeight: '600' }}>
                                                ‚Çπ{item.price * item.quantity}
                                            </span>
                                        </div>
                                    ))}
                                </div>
                                
                                {order.estimatedDeliveryTime && order.status !== 'delivered' && (
                                    <div style={{ background: 'var(--background)', padding: '10px', borderRadius: '8px', marginBottom: '15px' }}>
                                        <span style={{ color: 'var(--text-light)', fontSize: '14px' }}>
                                            ‚è±Ô∏è Estimated delivery: {order.estimatedDeliveryTime} minutes
                                        </span>
                                    </div>
                                )}
                                
                                <div style={{ display: 'flex', justifyContent: 'space-between', fontWeight: 'bold', fontSize: '18px', color: 'var(--primary)' }}>
                                    <span>Total</span>
                                    <span>‚Çπ{order.total}</span>
                                </div>
                            </div>
                        ))
                    )}
                </div>
            );
        }

        // Admin Dashboard Component
        function AdminDashboard() {
            const [activeTab, setActiveTab] = useState('stats');

            return (
                <div className="container" style={{ marginTop: '40px' }}>
                    <h2 style={{ color: 'var(--secondary)', marginBottom: '30px' }}>Admin Dashboard</h2>
                    
                    <div className="admin-nav">
                        <button
                            className={`admin-nav-item ${activeTab === 'stats' ? 'active' : ''}`}
                            onClick={() => setActiveTab('stats')}
                        >
                            üìä Dashboard
                        </button>
                        <button
                            className={`admin-nav-item ${activeTab === 'menu' ? 'active' : ''}`}
                            onClick={() => setActiveTab('menu')}
                        >
                            üçΩÔ∏è Menu Management
                        </button>
                        <button
                            className={`admin-nav-item ${activeTab === 'orders' ? 'active' : ''}`}
                            onClick={() => setActiveTab('orders')}
                        >
                            üì¶ Orders
                        </button>
                        <button
                            className={`admin-nav-item ${activeTab === 'coupons' ? 'active' : ''}`}
                            onClick={() => setActiveTab('coupons')}
                        >
                            üéüÔ∏è Coupons
                        </button>
                    </div>
                    
                    {activeTab === 'stats' && <AdminStats />}
                    {activeTab === 'menu' && <MenuManagement />}
                    {activeTab === 'orders' && <OrderManagement />}
                    {activeTab === 'coupons' && <CouponManagement />}
                </div>
            );
        }

        // Admin Stats
        function AdminStats() {
            const [stats, setStats] = useState(null);

            useEffect(() => {
                loadStats();
            }, []);

            const loadStats = async () => {
                try {
                    const data = await api.get('/api/stats');
                    setStats(data);
                } catch (error) {
                    console.error('Error loading stats:', error);
                }
            };

            if (!stats) {
                return <div className="loading"><div className="spinner"></div></div>;
            }

            return (
                <div className="stats-grid">
                    <div className="stat-card">
                        <div className="stat-value">{stats.totalOrders}</div>
                        <div className="stat-label">Total Orders</div>
                    </div>
                    <div className="stat-card">
                        <div className="stat-value">{stats.pendingOrders}</div>
                        <div className="stat-label">Pending Orders</div>
                    </div>
                    <div className="stat-card">
                        <div className="stat-value">‚Çπ{stats.totalRevenue}</div>
                        <div className="stat-label">Total Revenue</div>
                    </div>
                    <div className="stat-card">
                        <div className="stat-value">{stats.totalCustomers}</div>
                        <div className="stat-label">Total Customers</div>
                    </div>
                </div>
            );
        }

        // Menu Management
        function MenuManagement() {
            const [items, setItems] = useState([]);
            const [showModal, setShowModal] = useState(false);
            const [editingItem, setEditingItem] = useState(null);

            useEffect(() => {
                loadItems();
            }, []);

            const loadItems = async () => {
                try {
                    const data = await api.get('/api/menu/all');
                    setItems(data);
                } catch (error) {
                    console.error('Error loading menu:', error);
                }
            };

            const handleDelete = async (id) => {
                if (confirm('Are you sure you want to delete this item?')) {
                    try {
                        await api.delete(`/api/menu/${id}`);
                        loadItems();
                    } catch (error) {
                        alert('Error deleting item');
                    }
                }
            };

            return (
                <>
                    <div style={{ marginBottom: '20px', display: 'flex', justifyContent: 'flex-end' }}>
                        <button className="btn btn-primary" onClick={() => { setEditingItem(null); setShowModal(true); }}>
                            + Add Menu Item
                        </button>
                    </div>
                    
                    <div className="data-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Category</th>
                                    <th>Price</th>
                                    <th>Available</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {items.map(item => (
                                    <tr key={item._id}>
                                        <td>{item.name}</td>
                                        <td>{item.category}</td>
                                        <td>‚Çπ{item.price}</td>
                                        <td>{item.available ? '‚úì Yes' : '‚úó No'}</td>
                                        <td>
                                            <button className="btn btn-secondary btn-sm" onClick={() => { setEditingItem(item); setShowModal(true); }} style={{ marginRight: '5px' }}>
                                                Edit
                                            </button>
                                            <button className="btn btn-secondary btn-sm" onClick={() => handleDelete(item._id)}>
                                                Delete
                                            </button>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                    
                    {showModal && (
                        <MenuItemModal
                            item={editingItem}
                            onClose={() => setShowModal(false)}
                            onSave={() => { setShowModal(false); loadItems(); }}
                        />
                    )}
                </>
            );
        }

        // Menu Item Modal
        function MenuItemModal({ item, onClose, onSave }) {
            const [formData, setFormData] = useState(item || {
                name: '',
                description: '',
                price: '',
                category: 'Main Course',
                available: true
            });

            const handleSubmit = async (e) => {
                e.preventDefault();
                try {
                    if (item) {
                        await api.put(`/api/menu/${item._id}`, formData);
                    } else {
                        await api.post('/api/menu', formData);
                    }
                    onSave();
                } catch (error) {
                    alert('Error saving item');
                }
            };

            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal" onClick={(e) => e.stopPropagation()}>
                        <div className="modal-header">
                            <div className="modal-title">{item ? 'Edit' : 'Add'} Menu Item</div>
                            <button className="btn-icon" onClick={onClose}>‚úï</button>
                        </div>
                        
                        <form onSubmit={handleSubmit}>
                            <div className="modal-body">
                                <div className="form-group">
                                    <label className="form-label">Name</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={formData.name}
                                        onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                                        required
                                    />
                                </div>
                                
                                <div className="form-group">
                                    <label className="form-label">Description</label>
                                    <textarea
                                        className="form-input"
                                        rows="3"
                                        value={formData.description}
                                        onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                                    />
                                </div>
                                
                                <div className="form-group">
                                    <label className="form-label">Category</label>
                                    <select
                                        className="form-input"
                                        value={formData.category}
                                        onChange={(e) => setFormData({ ...formData, category: e.target.value })}
                                        required
                                    >
                                        <option>Appetizers</option>
                                        <option>Main Course</option>
                                        <option>Breads</option>
                                        <option>Rice</option>
                                        <option>Desserts</option>
                                        <option>Beverages</option>
                                        <option>Biryani</option>
                                        <option>Curry</option>
                                        <option>Snacks</option>
                                    </select>
                                </div>
                                
                                <div className="form-group">
                                    <label className="form-label">Price (‚Çπ)</label>
                                    <input
                                        type="number"
                                        className="form-input"
                                        value={formData.price}
                                        onChange={(e) => setFormData({ ...formData, price: e.target.value })}
                                        required
                                    />
                                </div>
                                
                                <div className="form-group">
                                    <label style={{ display: 'flex', alignItems: 'center', gap: '10px', cursor: 'pointer' }}>
                                        <input
                                            type="checkbox"
                                            checked={formData.available}
                                            onChange={(e) => setFormData({ ...formData, available: e.target.checked })}
                                        />
                                        <span>Available</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div className="modal-footer">
                                <button type="button" className="btn btn-secondary" onClick={onClose}>Cancel</button>
                                <button type="submit" className="btn btn-primary">Save</button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        }

        // Order Management
        function OrderManagement() {
            const [orders, setOrders] = useState([]);

            useEffect(() => {
                loadOrders();
            }, []);

            const loadOrders = async () => {
                try {
                    const data = await api.get('/api/orders/all');
                    setOrders(data);
                } catch (error) {
                    console.error('Error loading orders:', error);
                }
            };

            const updateStatus = async (orderId, status) => {
                try {
                    await api.put(`/api/orders/${orderId}/status`, { status });
                    loadOrders();
                } catch (error) {
                    alert('Error updating status');
                }
            };

            return (
                <div className="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Customer</th>
                                <th>Items</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {orders.map(order => (
                                <tr key={order._id}>
                                    <td>{order.orderId}</td>
                                    <td>{order.userId?.name}</td>
                                    <td>{order.items.length} items</td>
                                    <td>‚Çπ{order.total}</td>
                                    <td>
                                        <select
                                            value={order.status}
                                            onChange={(e) => updateStatus(order._id, e.target.value)}
                                            style={{ padding: '5px', borderRadius: '5px' }}
                                        >
                                            <option value="pending">Pending</option>
                                            <option value="confirmed">Confirmed</option>
                                            <option value="preparing">Preparing</option>
                                            <option value="out_for_delivery">Out for Delivery</option>
                                            <option value="delivered">Delivered</option>
                                            <option value="cancelled">Cancelled</option>
                                        </select>
                                    </td>
                                    <td>
                                        <button className="btn btn-secondary btn-sm">View Details</button>
                                    </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            );
        }

        // Coupon Management
        function CouponManagement() {
            const [coupons, setCoupons] = useState([]);
            const [showModal, setShowModal] = useState(false);

            useEffect(() => {
                loadCoupons();
            }, []);

            const loadCoupons = async () => {
                try {
                    const data = await api.get('/api/coupons');
                    setCoupons(data);
                } catch (error) {
                    console.error('Error loading coupons:', error);
                }
            };

            const handleDelete = async (id) => {
                if (confirm('Delete this coupon?')) {
                    try {
                        await api.delete(`/api/coupons/${id}`);
                        loadCoupons();
                    } catch (error) {
                        alert('Error deleting coupon');
                    }
                }
            };

            return (
                <>
                    <div style={{ marginBottom: '20px', display: 'flex', justifyContent: 'flex-end' }}>
                        <button className="btn btn-primary" onClick={() => setShowModal(true)}>
                            + Add Coupon
                        </button>
                    </div>
                    
                    <div className="data-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Code</th>
                                    <th>Discount</th>
                                    <th>Min Order</th>
                                    <th>Active</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {coupons.map(coupon => (
                                    <tr key={coupon._id}>
                                        <td><strong>{coupon.code}</strong></td>
                                        <td>
                                            {coupon.discountType === 'percentage' ? `${coupon.discount}%` : `‚Çπ${coupon.discount}`}
                                        </td>
                                        <td>‚Çπ{coupon.minOrder}</td>
                                        <td>{coupon.active ? '‚úì Yes' : '‚úó No'}</td>
                                        <td>
                                            <button className="btn btn-secondary btn-sm" onClick={() => handleDelete(coupon._id)}>
                                                Delete
                                            </button>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                    
                    {showModal && (
                        <CouponModal
                            onClose={() => setShowModal(false)}
                            onSave={() => { setShowModal(false); loadCoupons(); }}
                        />
                    )}
                </>
            );
        }

        // Coupon Modal
        function CouponModal({ onClose, onSave }) {
            const [formData, setFormData] = useState({
                code: '',
                discount: '',
                discountType: 'percentage',
                minOrder: '',
                maxDiscount: '',
                active: true
            });

            const handleSubmit = async (e) => {
                e.preventDefault();
                try {
                    await api.post('/api/coupons', formData);
                    onSave();
                } catch (error) {
                    alert('Error creating coupon');
                }
            };

            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal" onClick={(e) => e.stopPropagation()}>
                        <div className="modal-header">
                            <div className="modal-title">Add Coupon</div>
                            <button className="btn-icon" onClick={onClose}>‚úï</button>
                        </div>
                        
                        <form onSubmit={handleSubmit}>
                            <div className="modal-body">
                                <div className="form-group">
                                    <label className="form-label">Coupon Code</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        value={formData.code}
                                        onChange={(e) => setFormData({ ...formData, code: e.target.value.toUpperCase() })}
                                        placeholder="e.g., WELCOME50"
                                        required
                                    />
                                </div>
                                
                                <div className="form-group">
                                    <label className="form-label">Discount Type</label>
                                    <select
                                        className="form-input"
                                        value={formData.discountType}
                                        onChange={(e) => setFormData({ ...formData, discountType: e.target.value })}
                                    >
                                        <option value="percentage">Percentage</option>
                                        <option value="fixed">Fixed Amount</option>
                                    </select>
                                </div>
                                
                                <div className="form-group">
                                    <label className="form-label">
                                        Discount {formData.discountType === 'percentage' ? '(%)' : '(‚Çπ)'}
                                    </label>
                                    <input
                                        type="number"
                                        className="form-input"
                                        value={formData.discount}
                                        onChange={(e) => setFormData({ ...formData, discount: e.target.value })}
                                        required
                                    />
                                </div>
                                
                                <div className="form-group">
                                    <label className="form-label">Minimum Order Amount (‚Çπ)</label>
                                    <input
                                        type="number"
                                        className="form-input"
                                        value={formData.minOrder}
                                        onChange={(e) => setFormData({ ...formData, minOrder: e.target.value })}
                                    />
                                </div>
                                
                                {formData.discountType === 'percentage' && (
                                    <div className="form-group">
                                        <label className="form-label">Maximum Discount (‚Çπ)</label>
                                        <input
                                            type="number"
                                            className="form-input"
                                            value={formData.maxDiscount}
                                            onChange={(e) => setFormData({ ...formData, maxDiscount: e.target.value })}
                                        />
                                    </div>
                                )}
                            </div>
                            
                            <div className="modal-footer">
                                <button type="button" className="btn btn-secondary" onClick={onClose}>Cancel</button>
                                <button type="submit" className="btn btn-primary">Create Coupon</button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        }

        // Render App
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
